# FileFlow - 智能文件知识管理系统

> 🚀 基于 PARA 方法论的 macOS 原生文件智能整理与知识管理系统

![Platform](https://img.shields.io/badge/platform-macOS%2014%2B-blue)
![Swift](https://img.shields.io/badge/swift-5.9-orange)
![License](https://img.shields.io/badge/license-MIT-green)

---

## ✨ 核心特性

### 🧠 AI 驱动智能
- **语义向量搜索** - HNSW 算法实现毫秒级相似度检索，支持百万级文档
- **智能标签建议** - AI 自动提取和推荐文件标签
- **内容摘要生成** - 基于文件内容生成智能摘要
- **知识联想发现** - 自动发现文件间的潜在关联
- **多模态分析** - PDF、图片 OCR、音频转写、关键词提取
- **上下文感知推荐** - 基于日历、位置、时间主动推送相关资料

### 🎨 现代化设计系统
- **玻璃态 UI** - 毛玻璃效果 + 动态渐变背景
- **响应式仪表盘** - 可拖拽的自适应网格布局
- **10+ 组件库** - 统计卡片、活动图表、最近文件等
- **流畅动画** - 弹簧动画、悬浮效果、闪光动画
- **深色模式** - 原生深色模式支持

### ⚡ 高性能架构
- **增量索引管线** - 仅处理变更文件，效率提升 10x
- **内存映射优化** - mmap 缓存支持千万级文档
- **并发任务调度** - Swift Concurrency + OperationQueue
- **实时进度监控** - 暂停/恢复/取消任务控制

### 🔄 自动化工作流
- **可视化 Pipeline** - 拖拽式 AI 工作流构建器
- **预设模板库** - OCR → 摘要 → 标签 → 分类等
- **后台任务处理** - 增量处理管线智能调度
- **智能推送系统** - 基于用户上下文主动推荐

### 📁 PARA 方法论
- **四象限整理** - Projects / Areas / Resources / Archives 科学分类
- **生命周期管理** - 活跃 → 休眠 → 待清理 → 已归档 状态追踪
- **智能流转** - 自动检测长期未用文件，建议归档
- **项目归档向导** - 一键归档整个项目及其依赖资源

### 🤖 AI 智能分析
- **多模型支持** - OpenAI API / 本地 Ollama / 离线可用
- **自动标签建议** - AI 分析文件内容生成标签
- **智能分类** - 推荐最佳 PARA 分类
- **指数退避重试** - 网络异常自动恢复

### 🔍 多模态内容分析
- **PDF 文本提取** - 使用 PDFKit 提取 PDF 内容
- **图片 OCR** - 使用 Vision 框架识别图片文字
- **音频转写** - 使用 Speech 框架转换语音为文字
- **关键词提取** - 使用 NaturalLanguage 自动提取关键词

### 🔎 语义搜索
- **向量嵌入** - Apple NLEmbedding 生成文件语义向量
- **相似度搜索** - 余弦相似度匹配相关文件
- **相似文件发现** - 自动推荐内容相关的文件
- **渐进式索引** - 后台异步构建搜索索引

### 🏷️ 智能标签系统
- **标签层级** - 支持父子标签嵌套结构
- **智能合并** - Levenshtein 距离检测相似标签
- **同义词识别** - 自动识别"AI"≈"人工智能"
- **跨文件传播** - 相似文件自动继承标签
- **Finder 同步** - 与系统标签双向同步

### 📊 数据可视化
- **知识图谱** - 力导向图展示标签关系网络
- **统一仪表盘** - 首页集成关键存储指标与活动概览
- **生命周期仪表盘** - 文件状态统计与流转记录
- **存储分析** - 实时展示总文件、存储占用、已学习卡片数
- **自适应仪表盘** - 智能响应窗口大小与侧边栏状态

### ⚡ 性能优化
- **SQLite WAL 模式** - 高并发读写性能
- **懒加载分页** - 大量文件平滑滚动
- **增量索引** - 仅更新变更文件
- **内存缓存** - TTL 自动过期缓存

### 🔄 批量处理
- **拖拽批量导入** - 一次导入多个文件
- **重复检测** - SHA256 内容指纹识别
- **冲突处理** - 覆盖 / 跳过 / 重命名 / 合并
- **后台 AI 队列** - 批量分析进度可视化
- **撤销回滚** - 一键撤销整个导入会话

### 📋 自动化规则
- **规则引擎** - 自定义条件触发动作
- **预置模板** - 截图归档 / 文档整理等
- **扩展名匹配** - 按文件类型自动分类
- **标签自动应用** - 符合条件自动打标

### 🧠 用户习惯学习
- **反馈记录** - 记录用户对 AI 建议的修改
- **偏好统计** - 分析用户常用分类和标签
- **接受率追踪** - 监控 AI 建议准确度
- **个性化推荐** - 基于历史自动优化建议

### 🛡️ 稳定性保障
- **事务回滚** - 文件移动失败自动恢复
- **OSLog 日志** - 完整操作日志可导出
- **错误边界** - 优雅处理各类异常

---

## 🎨 设计理念

FileFlow 采用类似 **Obsidian Vault** 的设计：

| 原则 | 说明 |
|------|------|
| **文件系统为主** | 真实文件只存一份，移动而非复制 |
| **数据库为辅** | SQLite 仅作为索引和元数据存储 |
| **用户选择根目录** | 所有文件存储在用户指定目录 |
| **数据可移植** | 卸载应用后文件仍然有序存在 |

---

## 📦 安装

### 系统要求
- macOS 14.0 (Sonoma) 或更高版本
- 约 50MB 磁盘空间

### 使用 Xcode 构建

```bash
git clone https://github.com/yourname/FileFlow.git
cd FileFlow
open FileFlow.xcodeproj
# 选择 My Mac 作为目标，点击 Run (⌘R)
```

---

## 🚀 快速开始

### 目录结构

```
/Your/Root/Path/
├── 1_Projects/          # 当前项目
├── 2_Areas/             # 持续关注领域
├── 3_Resources/         # 参考资料
├── 4_Archives/          # 归档内容
└── .fileflow/           # 数据库和配置
```

### 工作流程

1. **拖拽文件** → 自动分析文件类型
2. **AI 建议** → 智能推荐标签和分类
3. **确认归档** → 文件移动到对应目录
4. **搜索使用** → 标签/内容/语义搜索

---

## ⌨️ 快捷键

| 快捷键 | 功能 |
|--------|------|
| ⌘O | 导入文件 |
| ⌘⇧B | 批量整理 |
| ⌘⇧F | 打开根目录 |
| ⌘, | 设置 |

---

## 🔧 技术栈

| 技术 | 用途 |
|------|------|
| **Swift 5.9** | 核心语言 |
| **SwiftUI** | 界面框架 |
| **SQLite3** | 数据存储 |
| **Vision** | 图片 OCR |
| **PDFKit** | PDF 解析 |
| **Speech** | 语音转写 |
| **NLEmbedding** | 语义搜索 |
| **CryptoKit** | 内容哈希 |

---

## 📄 License

MIT License © 2024 FileFlow

---

*"简洁是复杂的结晶" — 将复杂的文件管理，化为优雅的一键操作*
